<!-- src/app/pages/dashboard/dashboard.component.html -->

<!-- ========== Featured Highlight ========== -->
<div
  class="featured"
  *ngIf="featuredVideo"
  [ngStyle]="{
    'background-image':
      'radial-gradient(circle at center, transparent 50%, rgba(0,0,0,0.9)), ' +
      'linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), ' +
      'url(' + featuredVideo.thumbnail + ')'
  }"
>
  <div class="featured-content">
    <h1>{{ featuredVideo.title }}</h1>
    <p class="meta">
      Genre: {{ displayCategory(featuredVideo.category) }}
    </p>

    <div class="btn-group">
      <button class="btn play-btn" (click)="open(featuredVideo)">Play</button>
      <button class="btn info-btn" (click)="open(featuredVideo)">More&nbsp;Info</button>
    </div>
  </div>
</div>

<!-- ========== Genre-Reihen ========== -->
<div *ngFor="let cat of categories" class="genre-row">
  <h2>{{ cat.name }}</h2>

  <div class="thumb-strip">
    <div
      *ngFor="let vid of videosByCategory(cat.id)"
      class="thumb-card"
      (click)="open(vid)"
    >
      <img [src]="vid.thumbnail || 'assets/placeholder.jpg'" alt="{{ vid.title }}" />
    </div>
  </div>
</div>

<!-- ========== Detail-Panel mit Video.js ========== -->
<div *ngIf="active" class="overlay" tabindex="0" (keydown.escape)="close()">
  <div class="detail-box">
    <!-- großes Vorschaubild -->
    <img class="thumb-large" [src]="active.thumbnail || 'assets/placeholder.jpg'" alt="{{ active.title }}" />

    <!-- Titel + Genre -->
    <div class="info-row">
      <h1>{{ active.title }}</h1>
      <p class="meta">Genre: {{ displayCategory(active.category) }}</p>
    </div>

    <!-- Beschreibung -->
    <p class="description">
      <strong>Description:</strong><br />
      {{ active.description || 'Keine Beschreibung hinterlegt.' }}
    </p>

    <!-- ───── Qualität-Auswahl ───── -->
    <div class="quality-select" *ngIf="currentSources.length">
      <label for="quality">Quality:&nbsp;</label>
      <select
        id="quality"
        [value]="chosenSrc"
        (change)="onQualityChange($any($event.target).value)"
      >
        <option *ngFor="let s of currentSources" [value]="s.src">
          {{ s.label }}
        </option>
      </select>
    </div>

    <!-- Video.js-Player -->
    <video
      #videoPlayer
      id="video-player"
      class="video-js vjs-default-skin vjs-big-play-centered"
      controls
      preload="auto"
      width="100%"
      height="auto"
    ></video>
  </div>

  <!-- Close -->
  <button class="close-btn" (click)="close()">×</button>
</div>
